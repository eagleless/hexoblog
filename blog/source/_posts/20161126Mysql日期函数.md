---
title: Mysql日期函数
category: [database]
date: 2016-11-26 20:59:34
tags: [mysql]
---
mysql星期处理、日期处理。
参考：http://www.cnblogs.com/zeroone/archive/2010/05/05/1727659.html
<!--more-->
#   星期查询
`DAYOFWEEK(date)`
返回日期date的星期(1代表周日...7代表周六，ODBC标准)

    select DAYOFWEEK(SYSDATE())
    select DAYOFWEEK('1998-02-03')

`WEEKDAY(date)`
返回日期date的星期(0代表周一...6代表周日)

    select WEEKDAY(SYSDATE())

`DAYNAME(date)`
返回date是星期几，按照英文名。

    select DAYNAME("1998-02-05");
    Thursday

`WEEK(date,first)`
返回date是一年的第几周，first默认值为0，first取值1表示周一是周的开始,0从周日开始。2016-11-27为周日。

    select WEEK('2016-11-27',0)
    48
    select WEEK('2016-11-27',1)
    47

#   DAY查询
`DAYOFMONTH(date)`
返回date是一月中的第一天，在1-31范围内。

    select DAYOFMONTH('1998-02-03');

`DAYOFYEAR(date)`
返回date是一年中的第几日，在1到366范围内。

    select DAYOFYEAR(SYSDATE())

#   月份查询
`MONTH(date)`
返回date中的月份数值

    select MONTH('1998-02-03');

`MONTHNAME(date)` 
返回date是几月，按照英文名。

    select MONTHNAME("1998-02-05");
    February

`PERIOD_ADD(P,N)`

增加N个月到时期P并返回(P的格式YYMM或YYYYMM),例如在16年11月加上2个月为17年1月。

    select PERIOD_ADD(201611,2)
    201701

`PERIOD_DIFF(P1,P2)`
返回在时期P1和P2之间月数(P1和P2的格式YYMM或YYYYMM)

    select PERIOD_DIFF(9802,199703); 
    11

#   年份处理
`QUARTER(date)` 
返回date是一年的第几个季度

    select QUARTER('2016-11-26');

`YEAR(date)`
返回date的年份，范围在1000到9999

    select YEAR('2016-11-27')

#   时分秒
`HOUR(time)`
返回time的小时数，范围0-23

    select HOUR('10:05:03')
    10

`MINUTE(time)`
返回time的分钟数，范围0-59

    select MINUTE('2016-11-26 10:05:03')
    5

`SECOND(time)`
返回time的秒数，范围0-59

    select SECOND('10:06:07')
    7

#   日期时间加减

`DATE_ADD`、`ADDDATE`、`DATE_SUB`、`SUBDATE`

参数格式：(date,INTERVAL expr type)，date是一个datetime或者date值，expr对date进行加减法的一个表达式字符串type指明表达式expr应该如何被解释。
expr中允许任何标点做分隔符,如果所有是DATE值时结果是一个DATE值,否则结果是一个DATETIME值);如果type关键词不完整,则MySQL从右端取值,DAY_SECOND因为缺少小时分钟等于MINUTE_SECOND);如果增加MONTH、YEAR_MONTH或YEAR,天数大于结果月份的最大天数则使用最大天数) 。

|type值|含义|期望的expr格式|
|:-----|:-----|:-----|
|SECOND|秒|SECONDS|
|MINUTE| 分钟 |MINUTES |
|HOUR |时间 |HOURS |
|DAY |天 |DAYS |
|MONTH |月 |MONTHS |
|YEAR |年 |YEARS |
|MINUTE_SECOND |分钟和秒 |"MINUTES:SECONDS" |
|HOUR_MINUTE |小时和分钟 |"HOURS:MINUTES" |
|DAY_HOUR |天和小时 |"DAYS HOURS" |
|YEAR_MONTH |年和月 |"YEARS-MONTHS" |
|HOUR_SECOND |小时, 分钟| "HOURS:MINUTES:SECONDS"| 
|DAY_MINUTE |天, 小时, 分钟| "DAYS HOURS:MINUTES" |
|DAY_SECOND |天, 小时, 分钟, 秒|"DAYS HOURS:MINUTES:SECONDS"|

    select DATE_ADD(SYSDATE(),INTERVAL 1 DAY)
    2016-11-27 21:32:54
    select ADDDATE(SYSDATE(),INTERVAL 1 DAY)
    2016-11-27 21:32:54
    select DATE_SUB(SYSDATE(),INTERVAL 1 DAY)
    2016-11-25 21:38:36
    select SUBDATE(SYSDATE(),INTERVAL 1 DAY)
    2016-11-25 21:39:04
    SELECT "1997-12-31 23:59:59" INTERVAL 1 SECOND; 
    1998-01-01 00:00:00 
    SELECT INTERVAL 1 DAY "1997-12-31"; 
    1998-01-01 
    SELECT "1998-01-01" - INTERVAL 1 SECOND; 
    1997-12-31 23:59:59 
    SELECT DATE_ADD("1997-12-31 23:59:59",INTERVAL 1 SECOND); 
    1998-01-01 00:00:00 
    mysql> SELECT DATE_ADD("1997-12-31 23:59:59",INTERVAL 1 DAY); 
    1998-01-01 23:59:59 
    SELECT DATE_ADD("1997-12-31 23:59:59",INTERVAL "1:1" MINUTE_SECOND); 
    1998-01-01 00:01:00 
    SELECT DATE_SUB("1998-01-01 00:00:00",INTERVAL "1 1:1:1" DAY_SECOND); 
    1997-12-30 22:58:59 
    SELECT DATE_ADD("1998-01-01 00:00:00", INTERVAL "-1 10" DAY_HOUR);
    1997-12-30 14:00:00 
    SELECT DATE_SUB("1998-01-02", INTERVAL 31 DAY); 
    1997-12-02 
    SELECT EXTRACT(YEAR FROM "1999-07-02"); 
    1999 
    SELECT EXTRACT(YEAR_MONTH FROM "1999-07-02 01:02:03"); 
    199907 
    SELECT EXTRACT(DAY_MINUTE FROM "1999-07-02 01:02:03"); 
    20102 



















